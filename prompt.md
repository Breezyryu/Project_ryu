전처리 파이썬 코드 작성

리튬이온배터리 성능.수명 측정 데이터 전처리 작업


1. 폴더 경로(data_path) 입력받음
2.여러 채널을 돌릴 경우 data_path 내에 채널 번호가 넘버링 된 폴더가 생성
3. 각 폴더 내 000001부터 숫자 끝까지 판별하여 읽어 들인 후 데이터를 합치기.
4. CAPACITY.LOG 도 로드하여 데이터를 따로 관리 


#폴더 구조

# Toyo1
## 경로

data_path/
├── 86/
│   ├── 000001
│   ├── 000002
│   ├── ...
│   ├── 001980
│   ├── COMMON_ENV.CFG
│   ├── LCOUNT
│   ├── CHCMT
│   └── CAPACITY.LOG
├── 93/
└── ...

### 000001

| Date,Time,PassTime[Sec],Voltage[V],Current[mA],,,Temp1[Deg],,,,Condition,Mode,Cycle,TotlCycle,PassedDate,Temp1[Deg] |
| ------------------------------------------------------------------------------------------------------------------- |
| 2024/01/31,16:18:13,00000000,+3.7872,0.000000,,,+22.60,,,,1, 1, 1, 1, 0,+22.60                                      |
| 2024/01/31,16:18:16,00000003,+3.7872,0.000000,,,+22.70,,,,1, 1, 1, 1, 0,+22.70                                      |
| 2024/01/31,16:18:37,00000024,+3.8272,893.9000,,,+22.65,,,,1, 1, 1, 1, 0,+22.65                                      |

### CAPACITY.LOG

| Date,Time,Condition,Mode,Cycle,TotlCycle,Cap[mAh],PassTime,TotlPassTime,Pow[mWh],AveVolt[V],PeakVolt[V],,PeakTemp[Deg],Ocv,,Finish,DchCycle,PassedDate |
| ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 2024/01/31,20:42:42,1, 1, 1, 1,3667.963,004:24:29,004:24:29,15093.07,+4.1412,+4.5019,,+23.20,+3.7872,,Cur, 0, 0                                        |
| 2024/02/01,02:03:03,2, 1, 1, 1,4622.248,005:10:19,009:44:50,18135.83,+3.9237,+4.4618,,+23.15,+4.4893,,Vol, 1, 0                                        |
| 2024/02/01,02:23:28,1, 2, 1, 2,1545.768,000:10:24,010:05:15,6267.272,+4.0529,+4.1403,,+23.15,+3.4076,,Vol, 1, 0                                        |
| 2024/02/01,02:27:55,1, 3, 1, 3,534.6251,000:04:25,010:09:42,2205.787,+4.1236,+4.1603,,+23.25,+3.9867,,Vol, 1, 0                                        |
| ...
| 2024/02/23,14:42:18,1, 7, 1, 993,4488.304,005:25:24,550:24:05,18220.23,+4.0919,+4.5014,,+23.25,+3.5442,,Cur, 398, 22                                        |                                        |
| 2024/02/23,20:01:13,2, 7, 1, 993,4601.615,005:08:55,555:43:00,18108.13,+3.9353,+4.4598,,+23.25,+4.4898,,Vol, 399, 23                                        |

# Toyo2
## 경로

data_path/
├── 40/
│   ├── 000001
│   ├── 000002
│   ├── ...
│   ├── 001980
│   ├── COMMON_ENV.CFG
│   ├── LCOUNT
│   ├── CHCMT
│   └── CAPACITY.LOG
├── 41/
└── ...
### 000001

| Date,Time,PassTime[Sec],Voltage[V],Current[mA],,,Temp1[Deg],,,,Condition,Mode,Cycle,TotlCycle,Temp1[Deg] |
| -------------------------------------------------------------------------------------------------------- |
| 2024/01/31,16:18:13,00000000,+3.7872,0.000000,,,+22.60,,,,1, 1, 1, 1,+22.60                              |
| 2024/01/31,16:18:16,00000003,+3.7872,0.000000,,,+22.70,,,,1, 1, 1, 1,+22.70                              |
| 2024/01/31,16:18:37,00000024,+3.8272,893.9000,,,+22.65,,,,1, 1, 1, 1,+22.65                              | ...
|

### CAPACITY.LOG

| Date,Time,Condition,Mode,Cycle,TotlCycle,Cap[mAh],PassTime,TotlPassTime,Pow[mWh],AveVolt[V],PeakVolt[V],,PeakTemp[Deg],Ocv,,Finish |
| ---------------------------------------------------------------------------------------------------------------------------------- |
| 2024/01/31,20:42:42,1, 1, 1, 1,3667.963,004:24:29,004:24:29,15093.07,+4.1412,+4.5019,,+23.20,+3.7872,,Cur                          |
| 2024/02/01,02:03:03,2, 1, 1, 1,4622.248,005:10:19,009:44:50,18135.83,+3.9237,+4.4618,,+23.15,+4.4893,,Vol                          |
| 2024/02/01,02:23:28,1, 2, 1, 2,1545.768,000:10:24,010:05:15,6267.272,+4.0529,+4.1403,,+23.15,+3.4076,,Vol                          |
| 2024/02/01,02:27:55,1, 3, 1, 3,534.6251,000:04:25,010:09:42,2205.787,+4.1236,+4.1603,,+23.25,+3.9867,,Vol                          
|
| ...
|





코드는 잘 실행되었다.

capacity.csv 파일을 살펴보니 다음과 같다.

Date	Time	Condition	Mode	Cycle	TotlCycle 	Cap{mAh]	PassTime	TotlPassTime	Pow[mWh]	AveVolt[V]	PeakVolt[V]	Col12	PeakTemp[Deg]	Ocv	Col15	Finish
1	1	1	1	3667.963			15093.07	4.1412	4.5019		23.2	3.7872			0	0


이렇게 나와야한다.

Date	Time	Condition	Mode	Cycle	TotlCycle 	Cap_mAh	PassTime	TotlPassTime	Pow_mWh	AveVolt_V	PeakVolt_V	-	PeakTemp_Deg	Ocv_V	-	Finish
2024/01/31	20:42:42	1	1	1	1	3667.963	4:24:29	4:24:29	15093.07	4.1412	4.5019		23.2	3.7872		Cur
